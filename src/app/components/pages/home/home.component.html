<main>
  <section class="actions_section">
    <div class="select">
      <select class="has-text-weight-bold" [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option value="" class="has-text-weight-bold">Filtrar por categoria</option>
        <option *ngFor="let category of categories" [value]="category">
          {{ category | categoryTranslate }}
        </option>
      </select>
    </div>
    <div class="search_div">
      <input type="search" placeholder="Pesquise aqui..." [(ngModel)]="searchQuery" (input)="searchPosts()">
    </div>
    <button id="createButton" class="button" (click)="redirectCreatePost()">
      <span>Criar</span>
      <fa-icon [icon]="faSquarePlus"></fa-icon>
    </button>
  </section>
  <section class="posts mt-2">
    <ng-template #loadingTemplate>
      <div class="loading_wrapper">
        <span class="loading_spinner"></span>
      </div>
    </ng-template>
    <div class="columns is-multiline px-6" *ngIf="posts$ | async as posts; else loadingTemplate">
      <div
        *ngFor="let post of posts"
        class="column is-half-tablet is-one-third-desktop is-one-quarter-fullhd"
      >
        <app-post [post]="post"></app-post>
      </div>
      <div *ngIf="posts.length === 0" class="empty_posts">
        <h1>Nenhuma postagem no momento :(</h1>
      </div>
    </div>
  </section>
</main>
